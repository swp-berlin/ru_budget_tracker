# Data import folder

This folder needs to be filled **manually** (at least `raw/`). The import pipeline assumes a clear separation between **raw source files** and **cleaned/derived files**.

* The `raw/` directory must be filled manually (populated through an SFTP connection with our servers).
* The `clean/` directory is filled automatically:

  * cleaned copies of corrupt Excel files found in `raw/` (via `fix_corrupt_excel_files.py`)
  * and the `translations/` folder generated by `translations.py`

## What you need to add (manual steps)

1. **Add new source files to `raw/`** in the correct subfolders (see below).
2. **Follow the naming conventions** so the importer can discover files reliably.
3. Run:

   * `fix_corrupt_excel_files.py` to populate/update `clean/`
   * `import.py ...` pointing at `clean/` (budgets) and using `raw/` where required (totals, GDP)

## Folder structure (expected)

```text
data/import_files/
  raw/
    laws/
    reports/
    totals/
    conversion_tables/
      ppp/
      gdp/
        rosstat/
        minekonom/
  clean/
    laws/
    reports/
    translations/
    conversion_tables/
      ppp/


```

## Naming conventions

### Budget laws

* `law_YYYY.xlsx`

  * Example: `law_2024.xlsx`

### Budget reports (quarterly execution reports)

* `report_YYYY_MM.xlsx` (or `.xls`)

  * Example: `report_2024_03.xlsx`
* Note: the importer discovers reports using the pattern `report_{year}_*.xls*`, so the `_MM` part matters.

### Totals

* `totals_YYYY.xlsx` (recommended)

  * Example: `totals_2026.xlsx`
* These are imported explicitly by path (so the name is less strict), but consistency helps.

### GDP conversion tables

GDP data comes from three sources:

* **Rosstat (past quarters)** — quarterly nominal GDP, current prices, not seasonally adjusted. Rosstat updates this multiple times per year (including revisions).
* **Estimate for the latest completed quarter** — used when budget data exists but Rosstat GDP is not yet published.
* **Ministry of Economic Development / Wirtschaftsministerium (future periods)** — forecasts for the current year (annual) and future years (annual). VPN access required.

**Where files should live (for auto-discovery):**

* `raw/conversion_tables/gdp/rosstat/*.xlsx`
* `raw/conversion_tables/gdp/minekonom/*.xlsx`

If multiple files exist in a folder, the importer currently picks the **first match**. For deterministic behavior, pass explicit paths to the `gdp` command.

#### 1) Rosstat (past data, quarterly)

Get the data via:

* Interactive portal: [https://showdata.rosstat.gov.ru/report/280029/](https://showdata.rosstat.gov.ru/report/280029/)
* Rosstat national accounts page: [https://rosstat.gov.ru/statistics/accounts#](https://rosstat.gov.ru/statistics/accounts#)

  * Direct Excel download links change frequently (example that may change): [https://rosstat.gov.ru/storage/mediabank/VVP_kvartal_s1995-2025.xlsx](https://rosstat.gov.ru/storage/mediabank/VVP_kvartal_s1995-2025.xlsx)

#### 2) Special case: latest completed quarter (estimate)

If budget data exists for a quarter but Rosstat GDP is not yet published, estimate GDP as:

`GDP_{q,t} = GDP_{q,t-1} * (GDP_{q-1,t} / GDP_{q-1,t-1})`

Example (Q3/2025):

`GDP_Q3_2025 = GDP_Q3_2024 * (GDP_Q2_2025 / GDP_Q2_2024)`

#### 3) Ministry (future periods: current year total + future years total)

Source page (downloads are usually in compressed attachments containing an Excel file with the latest nominal GDP forecasts):

* [https://economy.gov.ru/material/directions/makroec/prognozy_socialno_ekonomicheskogo_razvitiya/](https://economy.gov.ru/material/directions/makroec/prognozy_socialno_ekonomicheskogo_razvitiya/)

Notes:

* Access typically requires a Russia-located VPN.
* Updates are usually published **twice per year** (often around **April** and **September**).
* One VPN option that has worked reliably (anecdotally): [https://www.vpn-naoborot.com/](https://www.vpn-naoborot.com/)

### PPP conversion factor (World Bank)

PPP conversion factors are fetched from the World Bank indicator:

* `PA.NUS.PPP` — **PPP conversion factor, GDP (LCU per international $)**

Recommended workflow:

* Prefer **API fetch** at runtime; keep a **CSV cache** as fallback.
* Place/maintain the cache at: `raw/conversion_tables/ppp/ppp.csv` (or wherever your parser expects it).

API endpoint:

* `https://api.worldbank.org/v2/country/RUS/indicator/PA.NUS.PPP?format=json`

Conversion direction reminder:

* The indicator is **LCU per international $**, so converting **RUB → Intl$ (PPP)** is `RUB / PPP`.

## Contents

### `raw/reports/`

Budget reports (quarterly budget execution reports).
Source: [https://roskazna.gov.ru/ispolnenie-byudzhetov/federalnyj-byudzhet/](https://roskazna.gov.ru/ispolnenie-byudzhetov/federalnyj-byudzhet/)

### `raw/laws/`

Budget laws, amendments, and their budget listings (usually attachment 12, 15, 17).
Source: [https://budget.gov.ru/%D0%91%D1%8E%D0%B4%D0%B6%D0%B5%D1%82/%D0%97%D0%B0%D0%BA%D0%BE%D0%BD-%D0%BE-%D0%B1%D1%8E%D0%B4%D0%B6%D0%B5%D1%82%D0%B5](https://budget.gov.ru/%D0%91%D1%8E%D0%B4%D0%B6%D0%B5%D1%82/%D0%97%D0%B0%D0%BA%D0%BE%D0%BD-%D0%BE-%D0%B1%D1%8E%D0%B4%D0%B6%D0%B5%D1%82%D0%B5)

### `raw/totals/`

Budget totals (total budget execution).
Source: [https://minfin.gov.ru/ru/document?id_4=80042-kratkaya_ezhemesyachnaya_informatsiya_ob_ispolnenii_federalnogo_byudzheta_mlrd._rub._nakopleno_s_nachala_goda](https://minfin.gov.ru/ru/document?id_4=80042-kratkaya_ezhemesyachnaya_informatsiya_ob_ispolnenii_federalnogo_byudzheta_mlrd._rub._nakopleno_s_nachala_goda)

### `raw/conversion_tables/`

Conversion tables used for conversions.

Expected subfolders:

* `raw/conversion_tables/gdp/rosstat/` (quarterly nominal GDP)
* `raw/conversion_tables/gdp/minekonom/` (yearly/forecast GDP)
* `raw/conversion_tables/ppp/` (PPP conversion factors; e.g., `ppp.csv` cache)
